CUSTOMER_KEY_FILE_PEM|Mandatory|The fully qualified path to your signing key, encoded in PEM format. This file is expected to contain an RSA 2048-bit Private Key.
GOLD_MASTER_OS_FILE|Mandatory|This should be your 'gold master' OS image. No customisation should be present in this image that you would not expect to be deployed to your entire fleet. rpi-sb-provisioner assumes this image has been created using pi-gen, and using a non-pi-gen image may produce undefined behaviour
RPI_DEVICE_STORAGE_TYPE|Mandatory|Specify the kind of storage your target will use. Supported values are sd, emmc, nvme.
RPI_DEVICE_FAMILY|Mandatory|Specify the family of Raspberry Pi device you are provisioning. Supported values are 4. For example, A Raspberry Pi Compute Module 4 would be family 4
RPI_DEVICE_BOOTLOADER_CONFIG_FILE|Mandatory, with a default|Warning: rpi-sb-provisioner will ignore the Raspberry Pi Bootloader configuration built by pi-gen, and use the one provided in this variable. Specify the Raspberry Pi Bootloader configuration you want your provisioned devices to use. A default is provided. Further information on the format of this configuration file can be found in the Raspberry Pi Documentation, at https://www.raspberrypi.com/documentation/computers/config_txt.html
RPI_DEVICE_LOCK_JTAG|Optional|Raspberry Pi devices have a mechanism to restrict JTAG access to the device. Note that using this function will prevent Raspberry Pi engineers from being able to assist in debugging your device, should you request assitance. Set to any value to enable the JTAG restrictions.
RPI_DEVICE_EEPROM_WP_SET|Optional|Raspberry Pi devices that use an EEPROM as part of their boot flow can configure that EEPROM to enable write protection - preventing modification. Set to any value to enable EEPROM write protection.
DEVICE_SERIAL_STORE|Optional, with a default|Specify a location for the seen-devices storage directory. This directory will contain a zero-length file named with the serial number of each device seen, with the created files being used inside the state machine of rpi-sb-provisioner
RPI_SB_WORKDIR|Optional|Warning - If you do not set this variable, your modified OS intermediates will not be stored, and will be unavailable for inspection. Set to a location to cache OS assets between provisioning sessions. Recommended for use in production. For example: /srv/rpi-sb-provisioner/
DEMO_MODE_ONLY|Optional|Set to 1 to allow the service to run without actually writing keys or OS images. You may, for example, use DEMO_MODE_ONLY in combination with RPI_SB_WORKDIR to inspect the modifications rpi-sb-provisioner would make to your OS ahead of deployment. Warning - Setting DEMO_MODE_ONLY will cause your seen-devices storage location to change to a subdirectory of the one specified by RPI_DEVICE_SERIAL_STORE, demo/